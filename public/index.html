 <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <style>
                body {
                  background-color: white; /* Ensure the iframe has a white background */
                }
    
                
              </style>
                        </head>
                        <body>
                            <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Captura Web Horizontal 4K</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: linear-gradient(135deg, #1e3a8a, #7e22ce); }
  </style>
</head>
<body class="text-white">
  <div class="max-w-4xl mx-auto px-4 py-8">
    <header class="text-center mb-10 mt-6">
      <h1 class="text-4xl md:text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-cyan-300 to-blue-300">
        ðŸ“¸ Captura Web Horizontal 4K
      </h1>
      <p class="text-lg opacity-90 max-w-2xl mx-auto">
        Captura cualquier pÃ¡gina web en orientaciÃ³n horizontal con resoluciÃ³n ultra nÃ­tida (3840Ã—2160)
      </p>
    </header>

    <div class="bg-white/5 backdrop-blur-sm rounded-2xl p-6">
      <div class="flex flex-col sm:flex-row gap-3 mb-5">
        <input 
          id="urlInput"
          type="url" 
          placeholder="https://ejemplo.com" 
          class="flex-1 px-4 py-3.5 bg-white/10 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-cyan-400 text-white placeholder-white/70 text-base"
          value="https://example.com"
        >
        <button 
          id="captureBtn"
          class="px-6 py-3.5 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-xl font-semibold hover:opacity-95 transition shadow-lg hover:shadow-cyan-500/30 whitespace-nowrap"
        >
          ðŸŽ¯ Capturar PÃ¡gina
        </button>
      </div>

      <div id="error" class="hidden bg-red-500/20 border border-red-500/40 text-red-100 p-3 rounded-lg mb-4 text-sm"></div>
      <div id="loading" class="hidden flex items-center gap-2 text-cyan-200 mb-4">
        <div class="w-5 h-5 border-2 border-cyan-400 border-t-transparent rounded-full animate-spin"></div>
        ðŸ“¸ Capturando... esto puede tardar 5-15 segundos
      </div>

      <div id="previewContainer" class="hidden mt-6">
        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4">
          <h3 class="text-xl font-bold">âœ… Captura completada</h3>
          <button 
            id="downloadBtn"
            class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 px-4 py-2.5 rounded-lg font-medium whitespace-nowrap transition shadow hover:shadow-green-500/30"
          >
            â†“ Descargar PNG HD
          </button>
        </div>
        <div class="bg-black/20 p-3 rounded-xl overflow-auto max-h-[70vh] border border-white/10">
          <img 
            id="preview" 
            class="max-w-full rounded-lg shadow-2xl mx-auto block"
            style="max-height: 60vh;"
          />
        </div>
      </div>
    </div>

    <footer class="text-center text-sm opacity-70 mt-12 pb-6">
      <p>App creada con Node.js + Puppeteer â€¢ Desplegada en Railway</p>
    </footer>
  </div>

  <script>
    document.getElementById('captureBtn').addEventListener('click', async () => {
      const url = document.getElementById('urlInput').value.trim();
      const errorEl = document.getElementById('error');
      const loadingEl = document.getElementById('loading');
      const previewContainer = document.getElementById('previewContainer');
      const captureBtn = document.getElementById('captureBtn');
      
      if (!url) {
        showError('Por favor ingresa una URL');
        return;
      }

      errorEl.classList.add('hidden');
      previewContainer.classList.add('hidden');
      loadingEl.classList.remove('hidden');
      captureBtn.disabled = true;
      captureBtn.innerHTML = 'ðŸ“¸ Procesando...';

      try {
        const apiUrl = `/screenshot?url=${encodeURIComponent(url)}`;
        const response = await fetch(apiUrl);
        
        if (!response.ok) {
          const errorData = await response.json().catch(() => ({}));
          throw new Error(errorData.error || `Error HTTP ${response.status}`);
        }

        const blob = await response.blob();
        const imageUrl = URL.createObjectURL(blob);
        
        document.getElementById('preview').src = imageUrl;
        previewContainer.classList.remove('hidden');
        
        document.getElementById('downloadBtn').onclick = () => {
          const a = document.createElement('a');
          a.href = imageUrl;
          a.download = 'captura-web-horizontal-4k.png';
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(imageUrl);
        };
        
      } catch (err) {
        console.error('Error:', err);
        showError(err.message || 'No se pudo capturar la pÃ¡gina. Verifica la URL e intenta nuevamente.');
      } finally {
        loadingEl.classList.add('hidden');
        captureBtn.disabled = false;
        captureBtn.innerHTML = 'ðŸŽ¯ Capturar PÃ¡gina';
      }
    });

    function showError(message) {
      const errorEl = document.getElementById('error');
      errorEl.textContent = message;
      errorEl.classList.remove('hidden');
      setTimeout(() => errorEl.classList.add('hidden'), 10000);
    }
  </script>
</body>
</html>


    
              <script>
                              const express = require('express');
const puppeteer = require('puppeteer');
const path = require('path');

const app = express();
const PORT = process.env.PORT || 3000;

app.use(express.static(path.join(__dirname, 'public')));

app.get('/screenshot', async (req, res) => {
  const { url } = req.query;
  if (!url) return res.status(400).json({ error: 'URL requerida' });

  try {
    new URL(url);
  } catch {
    return res.status(400).json({ error: 'URL invÃ¡lida' });
  }

  let browser;
  try {
    browser = await puppeteer.launch({
      args: [
        '--no-sandbox',
        '--disable-setuid-sandbox',
        '--disable-dev-shm-usage',
        '--disable-gpu'
      ]
    });

    const page = await browser.newPage();
    await page.setViewport({ width: 3840, height: 2160 });
    await page.goto(url, { waitUntil: 'networkidle2', timeout: 30000 });

    const screenshot = await page.screenshot({ fullPage: true, type: 'png' });
    await browser.close();

    res.set('Content-Type', 'image/png');
    res.set('Content-Disposition', 'inline; filename="captura.png"');
    res.send(screenshot);

  } catch (error) {
    console.error(error);
    if (browser) await browser.close();
    res.status(500).json({ error: 'Error: ' + error.message });
  }
});

app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, 'public', 'index.html'));
});

app.listen(PORT, '0.0.0.0', () => {
  console.log(`App corriendo en puerto ${PORT}`);
});


              </script>
                        </body>
                        </html>
                    
